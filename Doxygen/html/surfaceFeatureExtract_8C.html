<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<title>OpenFOAM: applications/utilities/surface/surfaceFeatureExtract/surfaceFeatureExtract.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="OpenFOAMlogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="http://openfoam.com">OpenFOAM</a>
   &#160;<span id="projectnumber"><a href="http://openfoam.com/download/source">v2306</a></span>
   </div>
   <div id="projectbrief"><a href="https://develop.openfoam.com">The open source CFD toolbox</a></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a6e4fee11f07c3b70486e88fe92cbbdc.html">applications</a></li><li class="navelem"><a class="el" href="dir_a740ba71acc8f57051af57c325cf1aa6.html">utilities</a></li><li class="navelem"><a class="el" href="dir_f17de662d5fa06afbf0442aecb6ca0a0.html">surface</a></li><li class="navelem"><a class="el" href="dir_3de2587fefae3b4dbc81e2c9b2592788.html">surfaceFeatureExtract</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">surfaceFeatureExtract.C File Reference<div class="ingroups"><a class="el" href="group__grpUtilities.html">Utilities</a> &raquo; <a class="el" href="group__grpSurfaceUtilities.html">Surface</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Extracts and writes surface features to file. All but the basic feature extraction is a work-in-progress.  
<a href="#details">More...</a></p>

<p><a href="surfaceFeatureExtract_8C_source.html">Go to the source code of this file.</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Extracts and writes surface features to file. All but the basic feature extraction is a work-in-progress. </p>
<p><b>Original source file</b> <a href="../../../applications/utilities/surface/surfaceFeatureExtract/surfaceFeatureExtract.C">surfaceFeatureExtract.C</a></p>
<p><a class="anchor" id="Description"></a> </p>
<p>The extraction process is driven by the <em>system/surfaceFeatureExtractDict</em> dictionary, but the <em>-dict</em> option can be used to define an alternative location.</p>
<p>The <em>system/surfaceFeatureExtractDict</em> dictionary contains entries for each extraction process. The name of the individual dictionary is used to load the input surface (found under <em>constant/triSurface</em>) and also as the basename for the output.</p>
<p>If the <code>surfaces</code> entry is present in a sub-dictionary, it has absolute precedence over a surface name deduced from the dictionary name. If the dictionary name itself does not have an extension, the <code>surfaces</code> entry becomes mandatory since in this case the dictionary name cannot represent an input surface file (ie, there is no file extension). The <code>surfaces</code> entry is a wordRe list, which allows loading and combining of multiple surfaces. Any exactly specified surface names must exist, but surfaces selected via regular expressions need not exist. The selection mechanism preserves order and is without duplicates. For example, </p><pre class="fragment">dictName
{
    surfaces    (surface1.stl "other.*" othersurf.obj);
    ...
}
</pre><p>When loading surfaces, the points/faces/regions of each surface are normally offset to create an aggregated surface. No merging of points or faces is done. The optional entry <code>loadingOption</code> can be used to adjust the treatment of the regions when loading single or multiple files, with selections according to the <a class="el" href="classFoam_1_1triSurfaceLoader.html#af32e66f2f8d7d566de29959e7b8ebe52">Foam::triSurfaceLoader::loadingOption</a> enumeration. </p><pre class="fragment">dictName
{
    // Optional treatment of surface regions when loading
    // (single, file, offset, merge)
    loadingOption   file;
    ...
}
</pre><p> The <code>loadingOption</code> is primarily used in combination with the <code>intersectionMethod</code> (specifically its <code>region</code> option). The default <code>loadingOption</code> is normally <code>offset</code>, but this changes to <code>file</code> if the <code>intersectionMethod</code> <code>region</code> is being used.</p>
<p>Once surfaces have been loaded, the first stage is to extract features according to the specified <code>extractionMethod</code> with values as per the following table: </p><table class="OFTable">
<tr>
<th align="center"><b> extractionMethod </b> </th><th align="center"><b> Description</b>  </th></tr>
<tr>
<td><code>none</code>  </td><td>No feature extraction  </td></tr>
<tr>
<td><code>extractFromFile</code>  </td><td>Load features from the file named in featureEdgeFile  </td></tr>
<tr>
<td><code>extractFromSurface</code>  </td><td>Extract features from surface geometry  </td></tr>
</table>
<p>There are a few entries that influence the extraction behaviour: </p><pre class="fragment">        // File to use for extractFromFile input
        featureEdgeFile     "FileName"

        // Mark edges whose adjacent surface normals are at an angle less
        // than includedAngle as features
        // - 0  : selects no edges
        // - 180: selects all edges
        includedAngle       120;

        // Do not mark region edges
        geometricTestOnly   yes;</pre><p>This initial set of edges can be trimmed: </p><pre class="fragment">        trimFeatures
        {
            // Remove features with fewer than the specified number of edges
            minElem         0;

            // Remove features shorter than the specified cumulative length
            minLen          0.0;
        }</pre><p>and subsetted </p><pre class="fragment">    subsetFeatures
    {
        // Use a plane to select feature edges (normal)(basePoint)
        // Only keep edges that intersect the plane
        plane           (1 0 0)(0 0 0);

        // Select feature edges using a box // (minPt)(maxPt)
        // Only keep edges inside the box:
        insideBox       (0 0 0)(1 1 1);

        // Only keep edges outside the box:
        outsideBox      (0 0 0)(1 1 1);

        // Keep nonManifold edges (edges with &gt;2 connected faces where
        // the faces form more than two different normal planes)
        nonManifoldEdges yes;

        // Keep open edges (edges with 1 connected face)
        openEdges       yes;
    }</pre><p>Subsequently, additional features can be added from another file: </p><pre class="fragment">        addFeatures
        {
            // Add (without merging) another extendedFeatureEdgeMesh
            name        axZ.extendedFeatureEdgeMesh;
        }</pre><p>The intersectionMethod provides a final means of adding additional features. These are loosely termed "self-intersection", since it detects the face/face intersections of the loaded surface or surfaces.</p>
<table class="OFTable">
<tr>
<th align="center"><b> intersectionMethod </b> </th><th align="center"><b> Description</b>  </th></tr>
<tr>
<td><code>none</code>  </td><td>Do nothing  </td></tr>
<tr>
<td><code>self</code>  </td><td>All face/face intersections  </td></tr>
<tr>
<td><code>region</code>  </td><td>Limit face/face intersections to those between different regions.  </td></tr>
</table>
<p>The optional <code>tolerance</code> tuning parameter is available for handling the face/face intersections, but should normally not be touched.</p>
<p>As well as the normal extendedFeatureEdgeMesh written, other items can be selected with boolean switches:</p>
<table class="OFTable">
<tr>
<th align="center"><b> Output option </b> </th><th align="center"><b> Description</b>  </th></tr>
<tr>
<td><code>closeness</code>  </td><td>Output the closeness of surface elements to other surface elements.  </td></tr>
<tr>
<td><code>curvature</code>  </td><td>Output surface curvature  </td></tr>
<tr>
<td><code>featureProximity</code>  </td><td>Output the proximity of feature points and edges to another  </td></tr>
<tr>
<td><code>writeObj</code>  </td><td>Write features to OBJ format for postprocessing  </td></tr>
<tr>
<td><code>writeVTK</code>  </td><td>Write closeness/curvature/proximity fields as VTK for postprocessing  </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>Although surfaceFeatureExtract can do many things, there are still a fair number of corner cases where it may not produce the desired result. </dd></dl>

<p class="definition">Definition in file <a class="el" href="surfaceFeatureExtract_8C_source.html">surfaceFeatureExtract.C</a>.</p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<hr class="footer"/>
  <address class="footer">
    <small>
      <p>
        Copyright&nbsp;&copy;&nbsp;2011-2018&nbsp;
        <a href="http://www.openfoam.com">OpenFOAM</a>
        |
        OPENFOAM&reg; is a registered
        <a href="http://www.openfoam.com/legal/trademark-policy.php">trademark
        </a> of OpenCFD Ltd.
      </p>
      <p>
        Generated by &#160;<a href="http://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.png" alt="doxygen"/>
        </a> 1.9.8
      </p>
    </small>
  </address>
<!-- BEGIN MATHJAX-->
<!-- END MATHJAX-->
</body>
</html>
